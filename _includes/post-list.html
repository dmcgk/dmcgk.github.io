{% include post-type.liquid %}

{% if is_micro_post %}
  <!-- Begin article excerpt -->
  <section class="h-entry micro-excerpt">
{% else %}
  <!-- Begin micro post excerpt -->
  <section class="h-entry article-excerpt">
{% endif %}

<!-- Post date -->
<h4>
  <a href="{{ post.url }}" class="u-url dt-published{% if is_micro_post %} p-name{% endif %}">{{ post.date | date: '%-d %B %Y, %H:%M' }}</a>
</h4>

<!-- Article title -->
{% unless is_micro_post %}
<h2>
  <a href="{{ post.url }}" class="p-name">{{ post.title }}</a>
</h2>
{% endunless %}

<!-- Post excerpt -->
{% if post.description %}
  {% assign post_text = post.description %}
  {{ post_text }} 
{% else %}
  {% assign post_text = post.content | truncatewords:site.inline_article_length %}
  {{ post_text }}

  <!-- 'Read More' placeholder & workaround for lack of Array element addition in Liquid -->
  {% assign read_more_elements = "" %}
  {% if post.images %}{% assign read_more_elements = read_more_elements | append: "images," %}{% endif %}
	{% if raw.size > post_text.size %}{% assign read_more_elements = read_more_elements | append: "more," %}{% endif %}

  {% unless read_more_elements == "" %}
    {% assign read_more_array = read_more_elements | split: "," %}
    {% capture read_more_text %}{% for element in read_more_array %}{{ element }}{% unless forloop.last %} & {% endunless %}{% endfor %}{% endcapture %}
	  <p class="read-more"><a href="{{ post.url }}">({{ read_more_text }})</a></p>
	{% endunless %}
{% endif %}

<!-- Close separators -->
</section>
