{% assign raw = post.content | strip_html %}

{% if raw.size > site.micro_length %}
  {% assign article_post = true %}
  
  <!-- Article separator -->
  {% unless prior_article_post %}
    <hr />
  {% endunless %}

  <!-- Article title -->
  <h2>
    <a href="{{ post.url }}">{{ post.title }}</a>
  </h2>
{% else %}
  {% assign article_post = false %}
{% endif %}

<!-- Post date -->
<h4>
  <a href="{{ post.url }}">{{ post.date | date: '%-d %B %Y, %H:%M' }}</a>
</h4>

<!-- Post excerpt -->
<p>
  {% if post.description %}
    {% assign post_text = post.description | strip_html %}
    {{ post_text }} 
  {% else %}
    {% assign post_text = raw | truncatewords:100 %}
    {{ post_text }} 
  	{% if raw.size > post_text.size %}
  	  <a href="{{ post.url }}">(more)</a>
  	{% endif %}
  {% endif %}
</p>

<!-- Article separator -->
{% if article_post %}
  {% assign prior_article_post = true %}
  <hr />
{% else %}
  {% assign prior_article_post = false %}
{% endif %}
